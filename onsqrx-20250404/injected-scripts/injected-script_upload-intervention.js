"use strict";(()=>{var ze=function(r,t,e,o,n){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?n.call(r,e):n?n.value=e:t.set(r,e),e},Ge=function(r,t,e,o){if(e==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!o:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?o:e==="a"?o.call(r):o?o.value:t.get(r)},J,a=class extends Error{constructor(t,e){super(e),J.set(this,void 0),ze(this,J,t,"f")}get key(){return Ge(this,J,"f")}};J=new WeakMap;function U(r,t,e){return(o,n="")=>{try{let s=t.reduce((i,C)=>C(i,n),o);return e?.(s,n),We(n,r,s)}catch(s){return fe(o,s)}}}function fe(r,t){return{initialValue:r,hasError:!0,error:t}}function We(r,t,e){try{return t.forEach(o=>o(e,r)),{initialValue:e,result:e,hasError:!1}}catch(o){return fe(e,o)}}var j=(r,t,e,o)=>(n,s="")=>{if(!(r?!t(n):t(n)))throw new a(s,`${e??typeof n} '${n}' ${r?"is":"is not"} ${o}`)};function Je(r,t,e,o){return`${r} ${t} is${o?" ":" not "}${e}`}function D(r){return(t,e,o,n,s)=>{if(!e())throw new a(t,Je(r,o,n,s))}}var Y=D("array"),de=r=>t=>(e,o="")=>{Y(o,()=>r?e.length!==t:e.length===t,`of length ${e.length}`,`of exact length ${t}`,r)},Ye=r=>t=>(e,o="")=>{Y(o,()=>r?e.length<t:e.length>=t,`of length ${e.length}`,`within minimum length of ${t}`,r)},Xe=r=>t=>(e,o="")=>{Y(o,()=>r?e.length>t:e.length<=t,`of length ${e.length}`,`within maximum length of ${t}`,r)},he=r=>()=>(t,e="")=>{Y(e,()=>r?t.length!==0:t.length===0,`of length ${t.length}`,"empty",r)};function K(r=[]){let t=[],e=U(t,r,(o,n="")=>{if(!Array.isArray(o))throw new a(n,`Value ${o} is not an array`)});return e.toString=B(e,o=>o.join(", ")),e.toNumber=O(e,o=>Number(o)),e.toBoolean=V(e,o=>!!o),e.toCustom=k(e),e.assert=(o,n)=>(t.push(j(!1,o,"array",n)),e),e.ofExactLength=o=>(t.push(de(!1)(o)),e),e.ofMinLength=o=>(t.push(Ye(!1)(o)),e),e.ofMaxLength=o=>(t.push(Xe(!1)(o)),e),e.empty=()=>(t.push(he(!1)()),e),e.not={assert:(o,n)=>(t.push(j(!0,o,"array",n)),e),empty:()=>(t.push(he(!0)()),e),ofExactLength:o=>(t.push(de(!0)(o)),e)},e.items=function(o){return K([(n,s="")=>{let i=e(n,s);if(i.hasError)throw i.error;let C=i.result.map(($,F)=>o($,[s,`[${F}]`].filter(Boolean).join(".")));if(C.some($=>$.hasError))throw C.filter($=>$.hasError);return C.reduce(($,F)=>(F.hasError||$.push(F.result),$),[])}])},e}var be=D("boolean"),ye=r=>()=>(t,e="")=>{be(e,()=>r?!t:t,t,"true",r)},ge=r=>()=>(t,e="")=>{be(e,()=>r?t:!t,t,"false",r)};function X(r=[]){let t=[],e=U(t,r,(n,s="")=>{if(typeof n!="boolean")throw new a(s,`Value ${n} is not a boolean`)});e.toString=B(e,n=>n.toString()),e.toNumber=O(e,n=>n?1:0),e.toBoolean=V(e,n=>n),e.toCustom=k(e),e.toArray=L(e);let o=n=>(s,i)=>(t.push(j(n,s,"boolean",i)),e);return e.assert=o(!1),e.true=()=>(t.push(ye(!1)()),z(!0,e)),e.false=()=>(t.push(ge(!1)()),z(!1,e)),e.not={assert:o(!0),true:()=>(t.push(ye(!0)()),z(!1,e)),false:()=>(t.push(ge(!0)()),z(!0,e))},e}function Ee(r=[]){let e=U([],r,(o,n="")=>{if(typeof o!="boolean")throw new a(n,`Value ${o} is not a boolean`);if(o!==!1)throw new a(n,`Value ${o} must be false`)});return e.toString=B(e,o=>o.toString()),e.toNumber=O(e,o=>o?1:0),e.toBoolean=V(e,o=>o),e.toCustom=k(e),e.toArray=L(e),e}function we(r=[]){let e=U([],r,(o,n="")=>{if(typeof o!="boolean")throw new a(n,`Value ${o} is not a boolean`);if(o!==!0)throw new a(n,`Value ${o} must be true`)});return e.toString=B(e,o=>o.toString()),e.toNumber=O(e,o=>o?1:0),e.toBoolean=V(e,o=>o),e.toCustom=k(e),e.toArray=L(e),e}function xe(r=[]){let t=[],e=U(t,r);e.toString=B(e,()=>""),e.toNumber=O(e,()=>0),e.toBoolean=V(e,()=>!1),e.toCustom=k(e),e.toArray=L(e);let o=n=>(s,i)=>(t.push(j(n,s,"custom value",i)),e);return e.assert=o(!1),e.not={assert:o(!0)},e}var _=D("number"),Te=r=>t=>(e,o="")=>{if(!(r?t.indexOf(e)===-1:t.indexOf(e)!==-1))throw new a(o,`Number value ${e} ${r?`is one of the disallowed values in [${t.join(", ")}]`:`is not one of the allowed values in [${t.join(", ")}]`}`)},Se=r=>()=>(t,e="")=>{_(e,()=>r?t<0:t>0,t,"positive",r)},Ae=r=>()=>(t,e="")=>{_(e,()=>r?t>0:t<0,t,"negative",r)},ve=r=>()=>(t,e="")=>{_(e,()=>r?t!==0:t===0,t,"zero",r)},$e=r=>t=>(e,o="")=>{_(o,()=>r?e>=t:e<t,e,`less than ${t}`,r)},Pe=r=>t=>(e,o="")=>{_(o,()=>r?e<=t:e>t,e,`more than ${t}`,r)},ke=r=>t=>(e,o="")=>{_(o,()=>r?e!==t:e===t,e,`equal to ${t}`,r)},Ce=r=>t=>(e,o="")=>{_(o,()=>r?e%t!==0:e%t===0,e,`a multiple of ${t}`,r)},Ue=r=>()=>(t,e="")=>{_(e,()=>r?!Number.isInteger(t):Number.isInteger(t),t,"an integer",r)};function Z(r=[]){let t=[],e=U(t,r,(n,s="")=>{if(typeof n!="number")throw new a(s,`Value ${n} is not a number`)});e.toString=B(e,n=>n.toString()),e.toNumber=O(e,n=>n),e.toBoolean=V(e,n=>n!==0),e.toCustom=k(e),e.toArray=L(e);let o=n=>(s,i)=>(t.push(j(n,s,"number",i)),e);return e.assert=o(!1),e.allowed=(...n)=>(t.push(Te(!1)(n)),e),e.integer=()=>(t.push(Ue(!1)()),e),e.positive=()=>(t.push(Se(!1)()),e),e.negative=()=>(t.push(Ae(!1)()),e),e.lessThan=n=>(t.push($e(!1)(n)),e),e.moreThan=n=>(t.push(Pe(!1)(n)),e),e.zero=()=>(t.push(ve(!1)()),e),e.multipleOf=n=>(t.push(Ce(!1)(n)),e),e.equals=n=>(t.push(ke(!1)(n)),e),e.not={assert:o(!0),allowed:(...n)=>(t.push(Te(!0)(n)),e),integer:()=>(t.push(Ue(!0)()),e),positive:()=>(t.push(Se(!0)()),e),negative:()=>(t.push(Ae(!0)()),e),lessThan:n=>(t.push($e(!0)(n)),e),moreThan:n=>(t.push(Pe(!0)(n)),e),zero:()=>(t.push(ve(!0)()),e),multipleOf:n=>(t.push(Ce(!0)(n)),e),equals:n=>(t.push(ke(!0)(n)),e)},e}function Q(r=[]){let t=[],e=U(t,r);e.toCustom=k(e);let o=n=>(s,i)=>(t.push(j(n,s,"custom value",i)),e);return e.assert=o(!1),e.not={assert:o(!0)},e}function B(r,t){return(e=t)=>ee([(o,n="")=>{let s=r(o,n);if(s.hasError)throw s.error;try{return e(s.result)}catch(i){throw new a(n,`Unable to create a string from ${typeof s.result} ${s.result}

 ${i instanceof Error?i.message:i}`)}}])}function O(r,t){return(e=t)=>Z([(o,n="")=>{let s=r(o,n);if(s.hasError)throw s.error;try{return e(s.result)}catch(i){throw new a(n,`Unable to create a number from ${typeof s.result} ${s.result}

 ${i instanceof Error?i.message:i}`)}}])}function V(r,t){return(e=t)=>X([(o,n="")=>{let s=r(o,n);if(s.hasError)throw s.error;try{return e(s.result)}catch(i){throw new a(n,`Unable to create a booolean from ${typeof s.result} ${s.result}

 ${i instanceof Error?i.message:i}`)}}])}function k(r){return t=>xe([(e,o="")=>{let n=r(e,o);if(n.hasError)throw n.error;try{return t(n.result)}catch(s){throw new a(o,`Unable to create custom type from ${typeof n.result} ${n.result}

 ${s instanceof Error?s.message:s}`)}}])}function L(r){return t=>K([(e,o="")=>{let n=r(e,o);if(n.hasError)throw n.error;try{return t(n.result)}catch(s){throw new a(o,`Unable to create an array from ${typeof n.result} ${n.result}

 ${s instanceof Error?s.message:s}`)}}])}function ae(r){return Q([(t,e="")=>{let o=r(t,e);if(o.hasError)throw o.error;return t}])}function z(r,t){return(r?we:Ee)([(o,n="")=>{let s=t(o,n);if(s.hasError)throw s.error;return o}])}var Ie=D("string"),Be=(r,t)=>e=>(o,n="")=>{Ie(n,()=>{let s=t?e:e.toLowerCase(),i=t?o:o.toLowerCase();return r?i!==s:i===s},o,"equal to",r)},Oe=(r,t)=>e=>(o,n="")=>{let s=t?e:e.map($=>$.toLowerCase()),i=t?o:o.toLowerCase();if(!(r?s.indexOf(i)===-1:s.indexOf(i)!==-1))throw new a(n,`String value ${o} ${r?`is one of the disallowed values in [${e.join(", ")}]`:`is not one of the allowed values in [${e.join(", ")}]`}`)},Ve=r=>()=>(t,e="")=>{Ie(e,()=>r?t.length!==0:t.length===0,t,"empty",r)},Fe=r=>t=>(e,o="")=>{if(!(r?!t.test(e):t.test(e)))throw new a(o,`String value '${e}' ${r?"matches":"does not match"} pattern ${t}`)};function ee(r=[]){let t=[],e={enabled:!0},o=U(t,r,(s,i="")=>{if(typeof s!="string")throw new a(i,`Value ${s} is not a string`)});o.toString=B(o,s=>s),o.toNumber=O(o,s=>Number(s)),o.toBoolean=V(o,s=>!!s),o.toCustom=k(o),o.toArray=L(o);let n=s=>(i,C)=>(t.push(j(s,i,"string",C)),o);return o.assert=n(!1),o.allowed=(...s)=>(t.push(Oe(!1,e.enabled)(s)),ae(o)),o.matches=s=>(t.push(Fe(!1)(s)),o),o.empty=()=>(t.push(Ve(!1)()),o),o.equals=s=>(t.push(Be(!1,e.enabled)(s)),ae(o)),o.case=s=>(e.enabled=s==="sensitive",o),o.not={assert:n(!0),allowed:(...s)=>(t.push(Oe(!0,e.enabled)(s)),o),matches:s=>(t.push(Fe(!0)(s)),o),empty:()=>(t.push(Ve(!0)()),o),equals:s=>(t.push(Be(!0,e.enabled)(s)),o)},o}function te(...r){return(t,e="")=>{let o=[];for(let n of r){let s=n(t,e);if(!s.hasError)return s;o.push(s)}return{hasError:!0,initialValue:t,error:o}}}function re(r=[]){let t=U([],r,(e,o="")=>{if(e!==void 0)throw new a(o,`Value ${e} is not undefined`)});return t.toString=B(t,()=>String(void 0)),t.toNumber=O(t,()=>NaN),t.toBoolean=V(t,()=>!1),t.toCustom=k(t),t.toArray=L(t),t}function oe(...r){return te(re(),...r)}function ne(r=[]){let t=[],e=U(t,r,(n,s="")=>{if(n===null||typeof n!="object"||Array.isArray(n))throw new a(s,`Value ${n} is not an object`)});e.toString=B(e,n=>String(n)),e.toNumber=O(e,n=>Number(n)),e.toBoolean=V(e,n=>!!n),e.toCustom=k(e);let o=n=>(s,i)=>(t.push(j(n,s,"object",i)),e);return e.assert=o(!1),e.not={assert:o(!0)},e.schema=function(n){return ne([(s,i="")=>{let C=e(s,i);if(C.hasError)throw C.error;let $={...s??{},...C.result},F=Object.entries(n).map(([P,R])=>[P,R($[P],[i,P].filter(Boolean).join("."))]),q=F.filter(([,P])=>P.hasError);if(q.length>0)throw q.reduce((P,[R,M])=>(P[R]=M,P),{});return F.reduce((P,[R,M])=>(M.hasError||(P[R]=M.result),P),$)}])},e.partial=function(n){return ne([(s,i="")=>{let C=e(s,i);if(C.hasError)throw C.error;let $={...s??{},...C.result},F=Object.entries(n).map(([P,R])=>{let M=oe(R)($[P],[i,P].filter(Boolean).join("."));return M.hasError&&console.error("ERROR IS HERE",M.error),[P,M]}),q=F.filter(([,P])=>P.hasError);if(q.length>0)throw q.reduce((P,[R,M])=>(P[R]=M,P),{});return F.reduce((P,[R,M])=>(M.hasError||M.result!==void 0&&(P[R]=M.result),P),$)}])},e}function Ne(r=[]){let t=U([],r,(e,o="")=>{if(e!==null)throw new a(o,`Value ${e} is not null`)});return t.toString=B(t,()=>String(null)),t.toNumber=O(t,()=>0),t.toBoolean=V(t,()=>!1),t.toCustom=k(t),t}function je(){let r=U([],[],(t,e="")=>{if(t!==null)throw new a(e,`Value ${t} is not an error`)});return r.toString=B(r,t=>String(t)),r.toNumber=O(r,()=>0),r.toBoolean=V(r,()=>!1),r.toCustom=k(r),r}function Me(r){let t=(e,o="")=>{if(!e||typeof e!="object"||Array.isArray(e))return{initialValue:e,hasError:!0,error:new a(o,`Value ${e} is not a record`)};let n=Object.entries(e).map(([s,i],C)=>r(i,[s,`[${C}]`].filter(Boolean).join(".")));return n.some(s=>s.hasError)?{initialValue:e,hasError:!0,error:n.filter(s=>s.hasError)}:{hasError:!1,initialValue:e,result:e}};return t.toString=B(t,e=>String(e)),t.toNumber=O(t,e=>Number(e)),t.toBoolean=V(t,e=>!!e),t.toCustom=k(t),t.toArray=L(t),t}var I={string:ee,number:Z,boolean:X,array:K,object:ne,error:je,null:Ne,undefined:re,oneof:te,stringUnion:Q,record:Me,optional:oe,anything:()=>r=>({initialValue:r,hasError:!1,result:r})};function G(r){return t=>!r(t).hasError}var Ze=I.object().schema({idResumeUpload:I.string(),files:I.anything()}),Uu=G(Ze),ue=I.string().allowed("active","inactive","observe");var Qe=I.object().schema({maxScanSizeBytes:I.number(),chunkSizeBytes:I.number(),maxHashSizeBytes:I.oneof(I.number(),I.null()),maxEvaluationTimeoutMs:I.number()}),et=I.object().schema({type:I.string().equals("upload-policy-update"),data:I.object().schema({policyState:ue,config:Qe})}),Qu=G(et);var Le={enableModule:"sqrx-enable-upload-policy"},tt=I.object().schema({type:I.string().equals("upload-enable"),data:I.object().schema({policyState:ue})}),qe=G(tt);var le=class{policyState="inactive";start=()=>{document.addEventListener(Le.enableModule,t=>{!("detail"in t)||!qe(t.detail)||(this.policyState=t.detail.data.policyState)})}},H=new le;var rt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),me={randomUUID:rt};var se,ot=new Uint8Array(16);function ce(){if(!se&&(se=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!se))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return se(ot)}var N=[];for(let r=0;r<256;++r)N.push((r+256).toString(16).slice(1));function Re(r,t=0){return(N[r[t+0]]+N[r[t+1]]+N[r[t+2]]+N[r[t+3]]+"-"+N[r[t+4]]+N[r[t+5]]+"-"+N[r[t+6]]+N[r[t+7]]+"-"+N[r[t+8]]+N[r[t+9]]+"-"+N[r[t+10]]+N[r[t+11]]+N[r[t+12]]+N[r[t+13]]+N[r[t+14]]+N[r[t+15]]).toLowerCase()}function nt(){if(me.randomUUID)return me.randomUUID();let r=ce();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Re(r)}var De=nt;var W=De;var st=r=>r instanceof CustomEvent&&r.detail&&"sqrx"in r.detail&&r.detail.sqrx||"detail"in r&&r.detail===99;function _e(){Document.prototype.createElement=new Proxy(Document.prototype.createElement,{apply:(r,t,e)=>{let o=Reflect.apply(r,t,e);return!e||typeof e[0]!="string"||e[0].toLowerCase()!=="input"||!(o instanceof HTMLInputElement)||(o.addEventListener=new Proxy(o.addEventListener,{apply:(n,s,i)=>{let[C,$]=i;if(n.apply(s,i),o.type==="file"&&C==="change"&&typeof $=="function"){let F=W();o.setAttribute("id-resume-upload",F);let q=ie.get(F)??[];q.push($),ie.set(F,q)}}}),o.addEventListener("change",n=>{if(!st(n)&&n.target instanceof HTMLInputElement&&n.target.type==="file"){if(n.target.parentElement!==null&&document.contains(n.target)){let $=n.target.getAttribute("id-resume-upload");$&&ie.delete($);return}let i=n.target.getAttribute("id-resume-upload");H.policyState==="active"&&(n.preventDefault(),n.stopImmediatePropagation(),n.stopPropagation(),i&&pe.set(i,n),i&&He.set(i,n.target));let C=new CustomEvent("sqrx-check-file",{detail:{idResumeUpload:i,files:n.target.files}});document.dispatchEvent(C)}},!0)),o}})}var ie=new Map,pe=new Map,He=new Map;document.addEventListener("sqrx-resume-original-events",r=>{if(!(r instanceof CustomEvent)||!r.target)return;let t=r.detail.idResumeUpload,e=pe.get(t),o=He.get(t);if(!e||!o)return;let n=ie.get(t)??[],s=new CustomEvent("change",{detail:{sqrx:!0},bubbles:!0});o.dispatchEvent(s),n.forEach(i=>i(new Event("change"))),pe.delete(t),o.files=null});function Ke(){"showOpenFilePicker"in window&&(window.showOpenFilePicker=new Proxy(window.showOpenFilePicker,{apply:async function(r,t,e){if(H.policyState==="inactive")return Reflect.apply(r,t,e);let o=await r.apply(t,e),n=Array.isArray(o)?o:[o],s=async()=>{let i=new DataTransfer;for(let $ of n){let F=await $.getFile();i.items.add(F)}return await new Promise($=>{let F=W();document.dispatchEvent(new CustomEvent("sqrx-check-file",{detail:{idResumeUpload:F,files:i.files}}));let q=P=>{!(P instanceof CustomEvent)||!P.target||F!==P.detail.idResumeUpload||($(!0),document.removeEventListener("sqrx-resume-original-events",q))};setTimeout(()=>{$(!1),document.removeEventListener("sqrx-resume-original-events",q)},3e3),document.addEventListener("sqrx-resume-original-events",q)})?n:void 0};return H.policyState==="observe"?(s(),n):await s()}}))}_e();Ke();H.start();document.addEventListener("sqrx-drop-trigger",r=>{if(!(r instanceof CustomEvent)||!r.target)return;try{let s=r.detail.uploadId,i=JSON.parse(localStorage.getItem("sqrx_upload_ids")??"{}");if(typeof s=="string"&&i[s])return;i[s]=!0,localStorage.setItem("sqrx_upload_ids",JSON.stringify(i))}catch{}let t=r.detail.fileList,e=DataTransferItem.prototype.webkitGetAsEntry;DataTransferItem.prototype.webkitGetAsEntry=null;let o=new DataTransfer;DataTransferItem.prototype.webkitGetAsEntry=e,o.effectAllowed="all";for(let s of t)o.items.add(s);let n=new CustomEvent("drop",{bubbles:!0,cancelable:!0,detail:{sqrx:!0}});Object.defineProperty(n,"view",{value:window,writable:!1}),Object.defineProperty(n,"dataTransfer",{value:o,writable:!1}),r.target.dispatchEvent(n)});})();
