"use strict";(()=>{var me=r=>new Promise(t=>setTimeout(t,r));var He=function(r,t,e,o,n){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?n.call(r,e):n?n.value=e:t.set(r,e),e},Ge=function(r,t,e,o){if(e==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!o:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?o:e==="a"?o.call(r):o?o.value:t.get(r)},H,a=class extends Error{constructor(t,e){super(e),H.set(this,void 0),He(this,H,t,"f")}get key(){return Ge(this,H,"f")}};H=new WeakMap;function $(r,t,e){return(o,n="")=>{try{let s=t.reduce((i,j)=>j(i,n),o);return e?.(s,n),Ze(n,r,s)}catch(s){return fe(o,s)}}}function fe(r,t){return{initialValue:r,hasError:!0,error:t}}function Ze(r,t,e){try{return t.forEach(o=>o(e,r)),{initialValue:e,result:e,hasError:!1}}catch(o){return fe(e,o)}}var C=(r,t,e,o)=>(n,s="")=>{if(!(r?!t(n):t(n)))throw new a(s,`${e??typeof n} '${n}' ${r?"is":"is not"} ${o}`)};function Qe(r,t,e,o){return`${r} ${t} is${o?" ":" not "}${e}`}function K(r){return(t,e,o,n,s)=>{if(!e())throw new a(t,Qe(r,o,n,s))}}var G=K("array"),pe=r=>t=>(e,o="")=>{G(o,()=>r?e.length!==t:e.length===t,`of length ${e.length}`,`of exact length ${t}`,r)},Xe=r=>t=>(e,o="")=>{G(o,()=>r?e.length<t:e.length>=t,`of length ${e.length}`,`within minimum length of ${t}`,r)},Je=r=>t=>(e,o="")=>{G(o,()=>r?e.length>t:e.length<=t,`of length ${e.length}`,`within maximum length of ${t}`,r)},de=r=>()=>(t,e="")=>{G(e,()=>r?t.length!==0:t.length===0,`of length ${t.length}`,"empty",r)};function I(r=[]){let t=[],e=$(t,r,(o,n="")=>{if(!Array.isArray(o))throw new a(n,`Value ${o} is not an array`)});return e.toString=P(e,o=>o.join(", ")),e.toNumber=v(e,o=>Number(o)),e.toBoolean=F(e,o=>!!o),e.toCustom=_(e),e.assert=(o,n)=>(t.push(C(!1,o,"array",n)),e),e.ofExactLength=o=>(t.push(pe(!1)(o)),e),e.ofMinLength=o=>(t.push(Xe(!1)(o)),e),e.ofMaxLength=o=>(t.push(Je(!1)(o)),e),e.empty=()=>(t.push(de(!1)()),e),e.not={assert:(o,n)=>(t.push(C(!0,o,"array",n)),e),empty:()=>(t.push(de(!0)()),e),ofExactLength:o=>(t.push(pe(!0)(o)),e)},e.items=function(o){return I([(n,s="")=>{let i=e(n,s);if(i.hasError)throw i.error;let j=i.result.map((V,O)=>o(V,[s,`[${O}]`].filter(Boolean).join(".")));if(j.some(V=>V.hasError))throw j.filter(V=>V.hasError);return j.reduce((V,O)=>(O.hasError||V.push(O.result),V),[])}])},e}var we=K("boolean"),he=r=>()=>(t,e="")=>{we(e,()=>r?!t:t,t,"true",r)},ye=r=>()=>(t,e="")=>{we(e,()=>r?t:!t,t,"false",r)};function Z(r=[]){let t=[],e=$(t,r,(n,s="")=>{if(typeof n!="boolean")throw new a(s,`Value ${n} is not a boolean`)});e.toString=P(e,n=>n.toString()),e.toNumber=v(e,n=>n?1:0),e.toBoolean=F(e,n=>n),e.toCustom=_(e),e.toArray=U(e);let o=n=>(s,i)=>(t.push(C(n,s,"boolean",i)),e);return e.assert=o(!1),e.true=()=>(t.push(he(!1)()),W(!0,e)),e.false=()=>(t.push(ye(!1)()),W(!1,e)),e.not={assert:o(!0),true:()=>(t.push(he(!0)()),W(!1,e)),false:()=>(t.push(ye(!0)()),W(!0,e))},e}function be(r=[]){let e=$([],r,(o,n="")=>{if(typeof o!="boolean")throw new a(n,`Value ${o} is not a boolean`);if(o!==!1)throw new a(n,`Value ${o} must be false`)});return e.toString=P(e,o=>o.toString()),e.toNumber=v(e,o=>o?1:0),e.toBoolean=F(e,o=>o),e.toCustom=_(e),e.toArray=U(e),e}function ge(r=[]){let e=$([],r,(o,n="")=>{if(typeof o!="boolean")throw new a(n,`Value ${o} is not a boolean`);if(o!==!0)throw new a(n,`Value ${o} must be true`)});return e.toString=P(e,o=>o.toString()),e.toNumber=v(e,o=>o?1:0),e.toBoolean=F(e,o=>o),e.toCustom=_(e),e.toArray=U(e),e}function Te(r=[]){let t=[],e=$(t,r);e.toString=P(e,()=>""),e.toNumber=v(e,()=>0),e.toBoolean=F(e,()=>!1),e.toCustom=_(e),e.toArray=U(e);let o=n=>(s,i)=>(t.push(C(n,s,"custom value",i)),e);return e.assert=o(!1),e.not={assert:o(!0)},e}var q=K("number"),xe=r=>t=>(e,o="")=>{if(!(r?t.indexOf(e)===-1:t.indexOf(e)!==-1))throw new a(o,`Number value ${e} ${r?`is one of the disallowed values in [${t.join(", ")}]`:`is not one of the allowed values in [${t.join(", ")}]`}`)},Ee=r=>()=>(t,e="")=>{q(e,()=>r?t<0:t>0,t,"positive",r)},Ae=r=>()=>(t,e="")=>{q(e,()=>r?t>0:t<0,t,"negative",r)},Se=r=>()=>(t,e="")=>{q(e,()=>r?t!==0:t===0,t,"zero",r)},Re=r=>t=>(e,o="")=>{q(o,()=>r?e>=t:e<t,e,`less than ${t}`,r)},ke=r=>t=>(e,o="")=>{q(o,()=>r?e<=t:e>t,e,`more than ${t}`,r)},_e=r=>t=>(e,o="")=>{q(o,()=>r?e!==t:e===t,e,`equal to ${t}`,r)},je=r=>t=>(e,o="")=>{q(o,()=>r?e%t!==0:e%t===0,e,`a multiple of ${t}`,r)},$e=r=>()=>(t,e="")=>{q(e,()=>r?!Number.isInteger(t):Number.isInteger(t),t,"an integer",r)};function Q(r=[]){let t=[],e=$(t,r,(n,s="")=>{if(typeof n!="number")throw new a(s,`Value ${n} is not a number`)});e.toString=P(e,n=>n.toString()),e.toNumber=v(e,n=>n),e.toBoolean=F(e,n=>n!==0),e.toCustom=_(e),e.toArray=U(e);let o=n=>(s,i)=>(t.push(C(n,s,"number",i)),e);return e.assert=o(!1),e.allowed=(...n)=>(t.push(xe(!1)(n)),e),e.integer=()=>(t.push($e(!1)()),e),e.positive=()=>(t.push(Ee(!1)()),e),e.negative=()=>(t.push(Ae(!1)()),e),e.lessThan=n=>(t.push(Re(!1)(n)),e),e.moreThan=n=>(t.push(ke(!1)(n)),e),e.zero=()=>(t.push(Se(!1)()),e),e.multipleOf=n=>(t.push(je(!1)(n)),e),e.equals=n=>(t.push(_e(!1)(n)),e),e.not={assert:o(!0),allowed:(...n)=>(t.push(xe(!0)(n)),e),integer:()=>(t.push($e(!0)()),e),positive:()=>(t.push(Ee(!0)()),e),negative:()=>(t.push(Ae(!0)()),e),lessThan:n=>(t.push(Re(!0)(n)),e),moreThan:n=>(t.push(ke(!0)(n)),e),zero:()=>(t.push(Se(!0)()),e),multipleOf:n=>(t.push(je(!0)(n)),e),equals:n=>(t.push(_e(!0)(n)),e)},e}function X(r=[]){let t=[],e=$(t,r);e.toCustom=_(e);let o=n=>(s,i)=>(t.push(C(n,s,"custom value",i)),e);return e.assert=o(!1),e.not={assert:o(!0)},e}function P(r,t){return(e=t)=>J([(o,n="")=>{let s=r(o,n);if(s.hasError)throw s.error;try{return e(s.result)}catch(i){throw new a(n,`Unable to create a string from ${typeof s.result} ${s.result}

 ${i instanceof Error?i.message:i}`)}}])}function v(r,t){return(e=t)=>Q([(o,n="")=>{let s=r(o,n);if(s.hasError)throw s.error;try{return e(s.result)}catch(i){throw new a(n,`Unable to create a number from ${typeof s.result} ${s.result}

 ${i instanceof Error?i.message:i}`)}}])}function F(r,t){return(e=t)=>Z([(o,n="")=>{let s=r(o,n);if(s.hasError)throw s.error;try{return e(s.result)}catch(i){throw new a(n,`Unable to create a booolean from ${typeof s.result} ${s.result}

 ${i instanceof Error?i.message:i}`)}}])}function _(r){return t=>Te([(e,o="")=>{let n=r(e,o);if(n.hasError)throw n.error;try{return t(n.result)}catch(s){throw new a(o,`Unable to create custom type from ${typeof n.result} ${n.result}

 ${s instanceof Error?s.message:s}`)}}])}function U(r){return t=>I([(e,o="")=>{let n=r(e,o);if(n.hasError)throw n.error;try{return t(n.result)}catch(s){throw new a(o,`Unable to create an array from ${typeof n.result} ${n.result}

 ${s instanceof Error?s.message:s}`)}}])}function se(r){return X([(t,e="")=>{let o=r(t,e);if(o.hasError)throw o.error;return t}])}function W(r,t){return(r?ge:be)([(o,n="")=>{let s=t(o,n);if(s.hasError)throw s.error;return o}])}var Be=K("string"),Pe=(r,t)=>e=>(o,n="")=>{Be(n,()=>{let s=t?e:e.toLowerCase(),i=t?o:o.toLowerCase();return r?i!==s:i===s},o,"equal to",r)},ve=(r,t)=>e=>(o,n="")=>{let s=t?e:e.map(V=>V.toLowerCase()),i=t?o:o.toLowerCase();if(!(r?s.indexOf(i)===-1:s.indexOf(i)!==-1))throw new a(n,`String value ${o} ${r?`is one of the disallowed values in [${e.join(", ")}]`:`is not one of the allowed values in [${e.join(", ")}]`}`)},Fe=r=>()=>(t,e="")=>{Be(e,()=>r?t.length!==0:t.length===0,t,"empty",r)},Ve=r=>t=>(e,o="")=>{if(!(r?!t.test(e):t.test(e)))throw new a(o,`String value '${e}' ${r?"matches":"does not match"} pattern ${t}`)};function J(r=[]){let t=[],e={enabled:!0},o=$(t,r,(s,i="")=>{if(typeof s!="string")throw new a(i,`Value ${s} is not a string`)});o.toString=P(o,s=>s),o.toNumber=v(o,s=>Number(s)),o.toBoolean=F(o,s=>!!s),o.toCustom=_(o),o.toArray=U(o);let n=s=>(i,j)=>(t.push(C(s,i,"string",j)),o);return o.assert=n(!1),o.allowed=(...s)=>(t.push(ve(!1,e.enabled)(s)),se(o)),o.matches=s=>(t.push(Ve(!1)(s)),o),o.empty=()=>(t.push(Fe(!1)()),o),o.equals=s=>(t.push(Pe(!1,e.enabled)(s)),se(o)),o.case=s=>(e.enabled=s==="sensitive",o),o.not={assert:n(!0),allowed:(...s)=>(t.push(ve(!0,e.enabled)(s)),o),matches:s=>(t.push(Ve(!0)(s)),o),empty:()=>(t.push(Fe(!0)()),o),equals:s=>(t.push(Pe(!0,e.enabled)(s)),o)},o}function Y(...r){return(t,e="")=>{let o=[];for(let n of r){let s=n(t,e);if(!s.hasError)return s;o.push(s)}return{hasError:!0,initialValue:t,error:o}}}function ee(r=[]){let t=$([],r,(e,o="")=>{if(e!==void 0)throw new a(o,`Value ${e} is not undefined`)});return t.toString=P(t,()=>String(void 0)),t.toNumber=v(t,()=>NaN),t.toBoolean=F(t,()=>!1),t.toCustom=_(t),t.toArray=U(t),t}function te(...r){return Y(ee(),...r)}function re(r=[]){let t=[],e=$(t,r,(n,s="")=>{if(n===null||typeof n!="object"||Array.isArray(n))throw new a(s,`Value ${n} is not an object`)});e.toString=P(e,n=>String(n)),e.toNumber=v(e,n=>Number(n)),e.toBoolean=F(e,n=>!!n),e.toCustom=_(e);let o=n=>(s,i)=>(t.push(C(n,s,"object",i)),e);return e.assert=o(!1),e.not={assert:o(!0)},e.schema=function(n){return re([(s,i="")=>{let j=e(s,i);if(j.hasError)throw j.error;let V={...s??{},...j.result},O=Object.entries(n).map(([k,D])=>[k,D(V[k],[i,k].filter(Boolean).join("."))]),M=O.filter(([,k])=>k.hasError);if(M.length>0)throw M.reduce((k,[D,L])=>(k[D]=L,k),{});return O.reduce((k,[D,L])=>(L.hasError||(k[D]=L.result),k),V)}])},e.partial=function(n){return re([(s,i="")=>{let j=e(s,i);if(j.hasError)throw j.error;let V={...s??{},...j.result},O=Object.entries(n).map(([k,D])=>{let L=te(D)(V[k],[i,k].filter(Boolean).join("."));return L.hasError&&console.error("ERROR IS HERE",L.error),[k,L]}),M=O.filter(([,k])=>k.hasError);if(M.length>0)throw M.reduce((k,[D,L])=>(k[D]=L,k),{});return O.reduce((k,[D,L])=>(L.hasError||L.result!==void 0&&(k[D]=L.result),k),V)}])},e}function Ce(r=[]){let t=$([],r,(e,o="")=>{if(e!==null)throw new a(o,`Value ${e} is not null`)});return t.toString=P(t,()=>String(null)),t.toNumber=v(t,()=>0),t.toBoolean=F(t,()=>!1),t.toCustom=_(t),t}function Ne(){let r=$([],[],(t,e="")=>{if(t!==null)throw new a(e,`Value ${t} is not an error`)});return r.toString=P(r,t=>String(t)),r.toNumber=v(r,()=>0),r.toBoolean=F(r,()=>!1),r.toCustom=_(r),r}function Le(r){let t=(e,o="")=>{if(!e||typeof e!="object"||Array.isArray(e))return{initialValue:e,hasError:!0,error:new a(o,`Value ${e} is not a record`)};let n=Object.entries(e).map(([s,i],j)=>r(i,[s,`[${j}]`].filter(Boolean).join(".")));return n.some(s=>s.hasError)?{initialValue:e,hasError:!0,error:n.filter(s=>s.hasError)}:{hasError:!1,initialValue:e,result:e}};return t.toString=P(t,e=>String(e)),t.toNumber=v(t,e=>Number(e)),t.toBoolean=F(t,e=>!!e),t.toCustom=_(t),t.toArray=U(t),t}var N={string:J,number:Q,boolean:Z,array:I,object:re,error:Ne,null:Ce,undefined:ee,oneof:Y,stringUnion:X,record:Le,optional:te,anything:()=>r=>({initialValue:r,hasError:!1,result:r})};function ie(r){return t=>!r(t).hasError}function Ue(r){return!!(r&&typeof r=="object"&&!Array.isArray(r))}function Ye(r){return{success:!1,error:r}}function et(r){return{success:!0,value:r}}async function Oe(r){try{let t=await r();return tt(t)?t:et(t)}catch(t){return Ye(t)}}function tt(r){return Ue(r)&&typeof r.success=="boolean"&&(r.success&&"value"in r||!r.success&&"error"in r)}function ae(...r){}var oe=class{_resolver=ae;_rejecter=ae;_promise;_settled=!1;get[Symbol.toStringTag](){return"[object SynchronizingPromise]"}constructor(){this._promise=new Promise((t,e)=>{this._resolver=o=>{this._settled=!0,t(o)},this._rejecter=o=>{this._settled=!0,e(o)}})}get isSettled(){return this._settled}get reject(){return this._rejecter}get resolve(){return this._resolver}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}};var z=class{_reqString;_resString;_listener;constructor(t){this._reqString=t+"-req",this._resString=t+"-res"}addListener=t=>{let e=async o=>{if(!("detail"in o))return null;let n=await t(o)??null;return document.dispatchEvent(new CustomEvent(this._resString,{detail:n})),null};this._listener=e,document.addEventListener(this._reqString,e)};clearListener=()=>{if(!this._listener)return null;document.removeEventListener(this._reqString,this._listener),this._listener=void 0};request=async t=>{let e=await Oe(()=>{let o=new oe;setTimeout(()=>o.reject(null),3e3);let n=s=>{if(!(s instanceof CustomEvent))return null;o.resolve(s.detail),document.removeEventListener(this._resString,n)};return document.addEventListener(this._resString,n),document.dispatchEvent(new CustomEvent(this._reqString,{detail:t})),o});return e.success?e.value:null}};var rt=N.object().schema({wasmURL:N.oneof(N.string(),N.undefined()),blobURL:N.string(),totalBytes:N.number()}),zc=ie(rt),De=new z("isReadyResolver"),Ke=new z("isWasmMaliciousResolver"),ot=N.object().schema({tag:N.string(),shadow_id:N.string(),selector:N.string(),parent_shadow_id:N.oneof(N.string(),N.null())}),Hc=ie(ot);function qe(r,t,e){let o=t.toLowerCase();return{tag:o,shadow_id:r,parent_shadow_id:e,selector:`${o}[sqrx-shadow-id='${r}']`}}var nt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ue={randomUUID:nt};var ne,st=new Uint8Array(16);function le(){if(!ne&&(ne=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ne))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ne(st)}var B=[];for(let r=0;r<256;++r)B.push((r+256).toString(16).slice(1));function Me(r,t=0){return(B[r[t+0]]+B[r[t+1]]+B[r[t+2]]+B[r[t+3]]+"-"+B[r[t+4]]+B[r[t+5]]+"-"+B[r[t+6]]+B[r[t+7]]+"-"+B[r[t+8]]+B[r[t+9]]+"-"+B[r[t+10]]+B[r[t+11]]+B[r[t+12]]+B[r[t+13]]+B[r[t+14]]+B[r[t+15]]).toLowerCase()}function it(){if(ue.randomUUID)return ue.randomUUID();let r=le();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Me(r)}var Ie=it;var ce=Ie;var We=new Map;Element.prototype.attachShadow=new Proxy(Element.prototype.attachShadow,{apply:(r,t,e)=>{let o=Reflect.apply(r,t,e),n=ce();We.set(t,n);let s=t.getRootNode(),i=s instanceof ShadowRoot&&s.host?We.get(s.host)??null:null;return window.queueMicrotask(()=>{t.setAttribute("sqrx-shadow-id",n),document.dispatchEvent(new CustomEvent("shadowDomAttached",{detail:qe(n,t.tagName,i)}))}),o}});function at(){let r=[];(window.React||document.querySelector("[data-reactroot], [data-reactid]")||Array.from(document.querySelectorAll("*")).some(t=>t._reactRootContainer!==void 0||Object.keys(t).some(e=>e.startsWith("__reactContainer"))))&&r.push("React"),(document.querySelector("script[id=__NEXT_DATA__]")||window.__next_f)&&r.push("Next.js"),document.querySelector("[id=___gatsby]")&&r.push("Gatsby"),(window.angular||document.querySelector(".ng-binding, [ng-app], [data-ng-app], [ng-controller], [data-ng-controller], [ng-repeat], [data-ng-repeat]")||document.querySelector('script[src*="angular.js"], script[src*="angular.min.js"]'))&&r.push("AngularJS"),(window.getAllAngularRootElements||window.ng?.coreTokens?.NgZone)&&r.push("Angular"),window.Backbone&&r.push("Backbone.js"),window.Ember&&r.push("Ember.js"),(window.Vue||window.__VUE__)&&r.push("Vue.js"),window.Meteor&&r.push("Meteor.js"),window.Zepto&&r.push("Zepto.js"),window.jQuery&&r.push("jQuery"),document.dispatchEvent(new CustomEvent("frameworksDetected",{detail:r}))}function ze(){setTimeout(()=>{at()},5e3)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ze):ze();window.WebAssembly=new Proxy(window.WebAssembly,{get(r,t,e){let o=Reflect.get(r,t,e);return typeof t!="string"||!["compile","instantiate","compileStreaming","instantiateStreaming"].includes(t)||"sqrx"in r&&r.sqrx?o:(r.sqrx=!0,async function(...s){let i=Reflect.apply(r[t],r,s),j,V;if(t==="compileStreaming"||t==="instantiateStreaming"){let k=s[0]instanceof Response?s[0]:await s[0],D=await k.clone().arrayBuffer();j=new Uint8Array(D),V=k.url}else j=new Uint8Array(s[0]);let O=URL.createObjectURL(new Blob([j],{type:"application/wasm"})),M=await ut({wasmURL:V,blobURL:O,totalBytes:j.byteLength});if(URL.revokeObjectURL(O),M)throw console.warn("Malicious WebAssembly detected!"),new Error("Malicious WebAssembly detected!");return i})}});async function ut(r){let t=0,e=null;for(;t<10&&!e;)t++,e=await De.request(),await me(100);if(!e)throw new Error("Content Script does not load after 2 seconds");return await Ke.request(r)}})();
